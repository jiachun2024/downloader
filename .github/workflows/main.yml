name: Part 1 - Core Apps
on: workflow_dispatch

jobs:
  download-part1:
    runs-on: ubuntu-latest
    steps:
      - name: 1. 拉取核心镜像
        run: |
          docker pull wechatopenai/weknora-app:latest
          docker pull wechatopenai/weknora-ui:latest
          docker pull wechatopenai/weknora-docreader:latest
          docker pull redis:7

      - name: 2. 打包核心镜像
        run: |
          docker save -o weknora-core.tar \
          wechatopenai/weknora-app:latest \
          wechatopenai/weknora-ui:latest \
          wechatopenai/weknora-docreader:latest \
          redis:7

      - name: 3. 上传核心包
        uses: actions/upload-artifact@v4
        with:
          name: weknora-core-bundle
          path: weknora-core.tar
          retention-days: 1
